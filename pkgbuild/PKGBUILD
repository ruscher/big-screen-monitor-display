pkgname=big-screen-monitor-display
pkgdesc="Big Screen Monitor Display - System Monitor Dashboard for USB LCD Displays"
depends=('python' 'python-pillow' 'python-psutil' 'python-pyusb' 'librsvg' 'lm_sensors' 'python-pystray')
pkgver=$(date +%y.%m.%d)
pkgrel=$(date +%H%M)
arch=('any')
license=('GPL3')
url="https://github.com/biglinux/$pkgname"
provides=("$pkgname")

if [ -e "pkgbuild.install" ];then
    install=pkgbuild.install
fi

package() {
    # Usa o diret√≥rio pai do pkgbuild como fonte
    InternalDir="${startdir}/.."

    # Copy files
    if [ -d "${InternalDir}/${pkgname}/usr" ]; then
        cp -r "${InternalDir}/${pkgname}/usr" "${pkgdir}/"
    fi

    # Make scripts executable
    chmod +x "${pkgdir}/usr/bin/big-screen-monitor-display.sh"
    chmod +x "${pkgdir}/usr/bin/big-screen-monitor-config.sh"
    chmod +x "${pkgdir}/usr/share/big-screen-monitor-display/main.py"

    # Ensure systemd service has correct permissions
    chmod 644 "${pkgdir}/usr/lib/systemd/system/big-screen-monitor-display.service"
}
